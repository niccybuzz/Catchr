<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include (`partials/header.ejs`) %>
    <title>Collections</title>
  </head>
  <body class="box-border bg-canvas h-screen flex flex-col font-kanit">
    <%- include (`partials/nav.ejs`) %>

    <!-- Full screen size flexbox -->
    <div class="flex items-start pt-6 md:pt-0 justify-center flex-1">
      <!-- All collections box -->
      <div
        class="flex flex-col justify-center items-center bg-canvas md:px-8 p-2 md:m-4 rounded-lg shadow-md h-fit w-full md:w-1/2 ws:w-1/3 ws:m-20 text-container text-sm md:text-lg"
      >
        <!-- Header -->
        <div class="flex justify-center">
          <h1 class="text-3xl text-center font-bold m-4">Top Collections</h1>
        </div>

        <!-- Contains search bar options -->
        <div class="h-16 bg-canvas relative flex justify-center">
          <!--  container for sort menu.-->
          <div class="text-left top-2 left-6 flex justify-center items-center">
            <!-- The button which when clicked on will toggle "hidden" for the dropdown options below -->
            <button
              id="sort-button"
              class="relative inline-flex justify-center items-center text-md px-2 py-1 mx-2 text-canvas rounded-md shadow-sm bg-button hover:bg-container transition-colors focus:outline-none focus:border-button focus:ring"
            >
              <img
                class="w-4 h-4 text-md hover:bg-gray-100 hover:text-canvas"
                src="https://cdn-icons-png.flaticon.com/512/2740/2740721.png"
              />
              <p class="px-2">Sort By</p>
              <!-- Dropdown options -->
              <div
                id="sort-menu"
                class="hidden absolute top-12 left-0 z-10 w-48 rounded-md shadow-lg bg-container text-canvas ring-1 ring-black ring-opacity-5"
              >
                <div class="py-1" role="menu">
                  <a
                    href=""
                    sort="numLikes"
                    order="desc"
                    class="block px-4 py-2 text-md hover:bg-gray-100 hover:text-gray-900"
                    role="menuitem"
                    >Most Likes</a
                  >
                  <a
                    href=""
                    sort="numLikes"
                    order="asc"
                    class="block px-4 py-2 text-md hover:bg-gray-100 hover:text-gray-900"
                    role="menuitem"
                    >Least Likes</a
                  >
                  <a
                    href=""
                    sort="numCards"
                    order="desc"
                    class="block px-4 py-2 text-md hover:bg-gray-100 hover:text-gray-900"
                    role="menuitem"
                    >Most Cards</a
                  >

                  <a
                    href=""
                    sort="numCards"
                    order="asc"
                    class="block px-4 py-2 text-md hover:bg-gray-100 hover:text-gray-900"
                    role="menuitem"
                    >Least Cards</a
                  >
                </div>
              </div>
            </button>
          </div>
        </div>

        <!-- Column Labels -->
        <div
          class="rounded-lg p-2 md:p-4 lg:text-xl mx-2 my-1 grid grid-cols-7 auto-cols-auto w-full justify-between items-center"
        >
          <p>Rank</p>
          <p class="col-span-3">Username</p>
          <p>Cards</p>
          <p class="text-button">Likes</p>
          <p class="justify-self-end">Profile</p>
        </div>

        <!-- Line for each collection -->
        <% let i = 1 %> <% collections.forEach((collection) => { %>
        <div
          class="border-2 border-gray-600 border-opacity-50 rounded-lg p-2 md:p-4 lg:text-xl mx-2 my-1 grid grid-cols-7 auto-cols-auto w-full justify-between items-center"
        >
          <p><%= i %></p>
          <% i++ %>
          <p class="col-span-3"><%=collection.User.username%></p>
          <p><%=collection.numCards%></p>
          <p class="text-button"><%=collection.numLikes%></p>

          <a
            class="text-container text-sm justify-self-end"
            href="/collections/<%=collection.user_id%>"
          >
            <button class="text-canvas py-1 px-3 bg-button rounded-md">
              Go
            </button>
          </a>
        </div>
        <% }) %>
      </div>

      
    </div>
    <%- include("partials/pagebuttons.ejs") %>
    <script src="/functions/collectionFilters.js"></script>
    <script src="/functions/swapcolours.js"></script>
    <%- include (`partials/footer.ejs`) %>
  </body>
  <!-- Scripts etc -->
  <%- include (`partials/tailwindDark.ejs`) %>
</html>
